<% provide :title, t(".all_categories") %>
<h1><%= t ".all_categories" %></h1>
<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= form_tag admin_categories_path, class: "form-inline", method: :get do %>
      <%= text_field_tag :search, params[:search], size: 50, class: "form-control" %>
      <%= button_tag t(".search"), class: "btn btn-primary" %>
   <% end %>
  </div>
  <div class="col-md-10 col-md-offset-1">
    <div class="col-md-6">
      <span>
        <%= link_to t(".new"), new_admin_category_path, class: "btn btn-success",
        id: "createCate" %>
      </span>
      <span>
        <%= link_to t(".import"), admin_csv_index_path %>
      </span>
      <div id="newCate" class="modal fade" role="form">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;
              </button>
              <h4 class="modal-title"><%= t ".create_title" %></h4>
            </div>
            <div class="modal-body">
              <%= form_for [:admin, @category],remote: true do |f| %>
                <%= render "shared/error_messages", object: f.object %>
                <%= f.label :name %>
                <%= f.text_field :name, class: "form-control" %>
                <%= f.submit t(".create_cate"), class: "btn btn-primary",
                  id: "create-category" %>
              <% end %>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">
              <%= t ".close" %></button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <span class="pull-right" style="line-height: 50px;">
        <%= t(".total_cate") + @categories.size.to_s %>
      </span>
    </div>
    <table class="table table-hover">
      <thead>
        <tr>
          <th><%= t ".category_name" %></th>
          <th><%= t ".words" %></th>
          <th colspan="3"></th>
        </tr>
      </thead>
      <tbody>
        <% @categories.each do |category| %>
          <tr id="cate">
            <td id="cate_name_<%= category.id %>" class="col-md-6">
              <%= category.name %>
            </td>
            <td class="col-md-2"><%= category.words.size %></td>
            <td class="col-md-1">
              <button id="<%= category.id %>" class="update btn btn-info">
                <%= t ".edit" %>
              </button>
            </td>
            <td class="col-md-1"><%= link_to t(".del"),
              admin_category_path(category), method: :delete, remote: true,
              id: category.id,
              data: {confirm: t(".confirm")}, class: "del btn btn-danger" %></td>
          </tr>
          <div id="edit_<%= category.id %>" class="modal fade" role="form">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;
                  </button>
                  <h4 class="modal-title"><%= t ".edit_title" %></h4>
                </div>
                <div class="modal-body">
                  <%= form_for [:admin, category], remote: true do |f| %>
                    <%= render "shared/error_messages", object: f.object %>
                    <%= f.label :name %>
                    <%= f.text_field :name, class: "form-control" %>
                    <%= f.submit t(".update_cate"), id: "update_" + category.id.to_s,
                      class: "btn btn-primary" %>
                  <% end %>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">
                  <%= t ".close" %></button>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </tbody>
    </table>
    <%= will_paginate @categories %>
  </div>
</div>
